C251 COMPILER V5.60.0,  key                                                                19/12/24  21:12:32  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE key
OBJECT MODULE PLACED IN .\Out_File\key.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE Out_File\key.c XSMALL WARNINGLEVEL(3) OPTIMIZE(0,SPEED) BROWSE INCDIR(
                    -..\..\Libraries\libraries;..\..\Libraries\seekfree_libraries;..\..\Libraries\seekfree_peripheral;..\CODE;..\USER\inc;..\
                    -USER\src;..\..\Libraries\seekfree_components;.\Out_File) DEBUG PRINT(.\Out_File\key.lst) TABS(2) OBJECT(.\Out_File\key.o
                    -bj) 

stmt  level    source

    1          #include "headfile.h"
    2          
    3          extern float set_turn;
    4          char bizhangSTARTFlag = 0;
    5          int switch_shizi_circle = 0;      //元素测试显示切换
    6          extern int judge_sign;    //元素判断启动标志
    7          
    8          
    9          char motor_start = 0;
   10          char key_function_flag = 1;
   11          char cricle_order = 20;
   12          char bizhang_order = 0;
   13          char cricle_function_switch = 1;
   14          
   15          
   16          void key(void)      //利用按键控制OLED
   17          {
   18   1        if(KEY0 == 0)      //切换模式
   19   1        {
   20   2          delay_ms(10);
   21   2          if(KEY0 == 0)
   22   2          {
   23   3            while(KEY0 == 0);
   24   3            
   25   3            if(motor_start==1)
   26   3            {
   27   4              l_pwm=0;    //手动脱线保护
   28   4              r_pwm=0;
   29   4              mr_pid.Bias=0;
   30   4              ml_pid.Bias=0;
   31   4      
   32   4              pwm_duty(MOTOR1,0); //左
   33   4              pwm_duty(MOTOR2,0); //右
   34   4              
   35   4              motor_start = 0;
   36   4              
   37   4            }
   38   3            else
   39   3            {
   40   4              motor_start = 1;
   41   4            }
   42   3          
   43   3          }
   44   2        }
   45   1      
   46   1        if(KEY1 == 0)
   47   1        {
   48   2          delay_ms(10);
   49   2          if(KEY1 == 0)
   50   2          {
   51   3      
   52   3            while(!KEY1); //等待按键松开
   53   3            ips_page+=1;
   54   3            if(ips_page==4)
   55   3            {
   56   4              ips_page=1;
C251 COMPILER V5.60.0,  key                                                                19/12/24  21:12:32  PAGE 2   

   57   4            }
   58   3            
   59   3          }
   60   2        }
   61   1        
   62   1        
   63   1        if(KEY2 == 0)         //向上切换页面
   64   1        {
   65   2          delay_ms(3);
   66   2          if(KEY2 == 0)
   67   2          {
   68   3            while(KEY2 == 0);
   69   3            
   70   3            key_function_flag+=1;
   71   3            if(key_function_flag==5)
   72   3            {
   73   4              key_function_flag=1;
   74   4            }
   75   3            
   76   3            
   77   3            
   78   3          }
   79   2        }
   80   1        
   81   1        if(KEY3 == 0)
   82   1        {
   83   2          delay_ms(10);
   84   2          if(KEY3 == 0)
   85   2          {
   86   3            while(KEY3 == 0); //等待按键松开
   87   3            switch_shizi_circle+=1;
   88   3            if(switch_shizi_circle==3)
   89   3            {
   90   4              switch_shizi_circle=0;
   91   4            }
   92   3            
   93   3            
   94   3            switch(key_function_flag) //功能键
   95   3            {
   96   4              case 1:   //避障顺序
   97   4                
   98   4                bizhang_order += 2;
   99   4                if(bizhang_order > 20)
  100   4                {
  101   5                  bizhang_order = 0;
  102   5                }
  103   4                break;
  104   4              
  105   4              case 2:   //圆环顺序
  106   4                
  107   4                cricle_order += 2;
  108   4                if(cricle_order > 20)
  109   4                {
  110   5                  cricle_order = 0;
  111   5                }
  112   4                break;
  113   4              
  114   4              case 3:   //改变速度
  115   4                
  116   4                r_target_speed += 2;
  117   4                l_target_speed += 2;
  118   4                target_speed_save = l_target_speed;
  119   4                break;
  120   4              
  121   4              case 4:
  122   4                
C251 COMPILER V5.60.0,  key                                                                19/12/24  21:12:32  PAGE 3   

  123   4                cricle_function_switch++;
  124   4                if(cricle_function_switch > 1)
  125   4                {
  126   5                  cricle_function_switch = 0;
  127   5                }
  128   4                
  129   4            }
  130   3              
  131   3          }
  132   2        }
  133   1        
  134   1        if(KEY4 == 0)
  135   1        {
  136   2          delay_ms(10);
  137   2          if(KEY4 == 0)
  138   2          {
  139   3            while(KEY4 == 0); //等待按键松开
  140   3            
  141   3          switch(key_function_flag)
  142   3            {
  143   4              case 1:
  144   4                
  145   4                bizhang_order += -1;
  146   4                break;
  147   4              
  148   4              case 2:
  149   4                
  150   4                cricle_order += -1;
  151   4                break;
  152   4              
  153   4              case 3:
  154   4                
  155   4                r_target_speed += -1;
  156   4                l_target_speed += -1;
  157   4                target_speed_save = l_target_speed;
  158   4                break;
  159   4              
  160   4            }
  161   3          }
  162   2        }
  163   1        
  164   1        
  165   1      }
  166          
  167          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       547     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =         8     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        36     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
